// –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
const axios = require('axios');

const BASE_URL = 'http://localhost:3000';

async function quickTest() {
  console.log('üß™ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è\n');

  try {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ—Å—Ç–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    console.log('üìä –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã...');
    
    const testPrices = [
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è EMA (50 —Å–≤–µ—á–µ–π)
      ...Array.from({length: 50}, (_, i) => 45 + i * 0.1),
      
      // –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö (–¥–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –ª–æ–Ω–≥)
      50.5,
      
      // –ü–∞–¥–µ–Ω–∏–µ (–¥–æ–ª–∂–Ω–æ —É—Å—Ä–µ–¥–Ω–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å —Ö–µ–¥–∂)
      49.5, 48.5,
      
      // –°–Ω–æ–≤–∞ –≤–≤–µ—Ä—Ö (–¥–æ–ª–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —à–æ—Ä—Ç)
      50.5,
      
      // –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ (–¥–æ–ª–∂–Ω–æ —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ª–æ–Ω–≥–∏ –∏ —Å–æ–∑–¥–∞—Ç—å —Ö–µ–¥–∂)
      49.0
    ];

    const response = await axios.post(`${BASE_URL}/simulate-price-movement`, {
      symbol: 'TESTUSDT',
      prices: testPrices
    });

    console.log('\n‚úÖ –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!');
    console.log('\nüìä –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É...');
    
    await axios.get(`${BASE_URL}/stats`);
    
    console.log('\nüéâ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã—à–µ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π!');

  } catch (error) {
    if (error.code === 'ECONNREFUSED') {
      console.error('‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω! –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ: npm run start:dev');
    } else {
      console.error('‚ùå –û—à–∏–±–∫–∞:', error.message);
    }
  }
}

quickTest();
