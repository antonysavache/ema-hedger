# EMA Hedger Strategy v2.0 - Multi-Symbol Edition

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

–¢–æ—Ä–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø–æ —Ç–æ–ø-150 –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–º –ø–∞—Ä–∞–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π EMA —Å —É–º–Ω—ã–º —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ–º –∏ —Ö–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–π.

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

- **EMA –ø–µ—Ä–∏–æ–¥**: 130
- **–†–∞–∑–º–µ—Ä –æ—Ä–¥–µ—Ä–∞**: 1% –æ—Ç –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –≤—Ö–æ–¥
- **–¢–∞–π–º—Ñ—Ä–µ–π–º**: 5 –º–∏–Ω—É—Ç
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç**: –¢–æ–ø 150 –ø–æ –æ–±—ä–µ–º—É —Ç–æ—Ä–≥–æ–≤
- **–•–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ, –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π

## üìä –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–æ–º**
- –ö–∞–∂–¥—ã–π –æ—Ä–¥–µ—Ä = 1% –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π

### 2. **–û—Ç–∫—Ä—ã—Ç–∏–µ LONG –ø–æ–∑–∏—Ü–∏–π**
- **–ü–µ—Ä–≤–∏—á–Ω—ã–π –≤—Ö–æ–¥**: –ü—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ —Ü–µ–Ω—ã —á–µ—Ä–µ–∑ EMA(130) —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö
- **–£—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ**: –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ü–µ–Ω—ã –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 1% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –ª–æ–Ω–≥–æ–≤ (—Ç–æ–ª—å–∫–æ –≤—ã—à–µ EMA)

### 3. **–û—Ç–∫—Ä—ã—Ç–∏–µ SHORT –ø–æ–∑–∏—Ü–∏–π (—Ö–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏–µ)**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ EMA —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑
- –†–∞–∑–º–µ—Ä —à–æ—Ä—Ç–∞ = –æ–±—ä–µ–º—É –≤—Å–µ—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ª–æ–Ω–≥–æ–≤ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
- –®–æ—Ä—Ç—ã –ù–ï —É—Å—Ä–µ–¥–Ω—è—é—Ç—Å—è - —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ

### 4. **–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π**
- **LONG**: –ü—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ EMA —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ —Å –æ–±—â–∏–º –ø—Ä–æ—Ñ–∏—Ç–æ–º
- **SHORT**: –ü—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ EMA —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —à–æ—Ä—Ç—ã

## üöÄ API Endpoints

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–µ–π

#### POST /start-trading
–ó–∞–ø—É—Å–∫ —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø–æ —Ç–æ–ø —Å–∏–º–≤–æ–ª–∞–º
```json
{
  "symbolCount": 150
}
```

#### POST /stop-trading
–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏

#### GET /trading-status
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ç–æ—Ä–≥–æ–≤–ª–∏
```json
{
  "isTrading": true,
  "activeSymbolsCount": 150,
  "mode": "SIMULATION",
  "connectionStatus": "SIMULATION_MODE"
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ

#### GET /portfolio
–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
```json
{
  "summary": {
    "totalSymbols": 150,
    "activePositions": 45,
    "totalPnL": 1234.56,
    "balance": 11234.56,
    "winRate": 67.8
  }
}
```

#### GET /active-symbols
–°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

#### GET /stats
–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞–º–∏

#### POST /add-symbol
–î–æ–±–∞–≤–∏—Ç—å —Å–∏–º–≤–æ–ª –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏
```json
{
  "symbol": "LINKUSDT"
}
```

#### POST /remove-symbol
–£–¥–∞–ª–∏—Ç—å —Å–∏–º–≤–æ–ª –∏–∑ —Ç–æ—Ä–≥–æ–≤–ª–∏
```json
{
  "symbol": "LINKUSDT"
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∏–º—É–ª—è—Ü–∏—è

#### POST /simulate-market
–°–∏–º—É–ª—è—Ü–∏—è —Ä—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
```json
{
  "duration": 60,
  "symbols": ["BTCUSDT", "ETHUSDT"]
}
```

#### GET /top-symbols?limit=20
–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø —Å–∏–º–≤–æ–ª—ã –ø–æ –æ–±—ä–µ–º—É

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
```bash
node test-multi-strategy.js
```

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç API
```bash
node quick-test.js
```

## üìà –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

```
–ü—Ä–∏–º–µ—Ä —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø–æ BTCUSDT:

1. –¶–µ–Ω–∞: 49500 ‚Üí 50500 (–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ EMA130 —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)
   ‚úÖ –û—Ç–∫—Ä—ã—Ç LONG –Ω–∞ 1% –æ—Ç –±–∞–ª–∞–Ω—Å–∞ (~100 USDT = 0.002 BTC)

2. –¶–µ–Ω–∞: 50500 ‚Üí 49000 (–ø–∞–¥–µ–Ω–∏–µ –Ω–∞ 3% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –ª–æ–Ω–≥–æ–≤)
   ‚úÖ –£—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ: –æ—Ç–∫—Ä—ã—Ç –µ—â–µ –æ–¥–∏–Ω LONG –Ω–∞ 1% –±–∞–ª–∞–Ω—Å–∞
   ‚úÖ –¶–µ–Ω–∞ –Ω–∏–∂–µ EMA: –æ—Ç–∫—Ä—ã—Ç HEDGE SHORT = –æ–±—ä–µ–º—É –≤—Å–µ—Ö –ª–æ–Ω–≥–æ–≤

3. –¶–µ–Ω–∞: 49000 ‚Üí 51000 (–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ EMA130 —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)
   ‚úÖ –ó–∞–∫—Ä—ã—Ç –≤–µ—Å—å SHORT
   ‚úÖ –û—Ç–∫—Ä—ã—Ç –Ω–æ–≤—ã–π LONG –Ω–∞ 1% –±–∞–ª–∞–Ω—Å–∞

4. –¶–µ–Ω–∞: 51000 ‚Üí 49500 (–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ EMA130 —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑)
   ‚úÖ –ó–∞–∫—Ä—ã—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–∏–±—ã–ª—å–Ω—ã–µ LONG –æ—Ä–¥–µ—Ä–∞
   ‚úÖ –î–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ª–æ–Ω–≥–æ–≤ –æ—Ç–∫—Ä—ã—Ç –Ω–æ–≤—ã–π HEDGE SHORT
```

## üé™ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:

```
üéØ === –°–ò–ì–ù–ê–õ EMA –¥–ª—è BTCUSDT ===
üìà –¢–∏–ø: üü¢ –ü–ï–†–ï–°–ï–ß–ï–ù–ò–ï –°–ù–ò–ó–£ –í–í–ï–†–•
üí∞ –¶–µ–Ω–∞: 50500.0000 USDT
üì¶ –†–∞–∑–º–µ—Ä –æ—Ä–¥–µ—Ä–∞: 1% –æ—Ç –±–∞–ª–∞–Ω—Å–∞ = 0.0020

üöÄ –î–ï–ô–°–¢–í–ò–ï: –û—Ç–∫—Ä—ã–≤–∞–µ–º –ü–ï–†–í–ò–ß–ù–´–ô –õ–û–ù–ì
‚úÖ ENTRY LONG –û–¢–ö–†–´–¢: BTCUSDT | ID: L1
   üí∞ –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: 50500.0000 USDT
   üì¶ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 0.0020
   üíµ –û–±—ä–µ–º: 101.00 USDT
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏

1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –ø–æ 150+ –ø–∞—Ä–∞–º
2. **–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç**: 1% –Ω–∞ –ø–æ–∑–∏—Ü–∏—é –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—É–º–º
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ç–æ–ø –º–æ–Ω–µ—Ç –ø–æ –æ–±—ä–µ–º—É
4. **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Ç—Ä–µ–∫–∏–Ω–≥
6. **–°–∏–º—É–ª—è—Ü–∏—è**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `ema-hedger-strategy.service.ts`:
```typescript
private readonly emaPeriod = 130;           // –ü–µ—Ä–∏–æ–¥ EMA
private readonly orderSizePercent = 1;      // 1% –æ—Ç –±–∞–ª–∞–Ω—Å–∞
private readonly timeframe = '5m';          // –¢–∞–π–º—Ñ—Ä–µ–π–º
private readonly maxSymbols = 150;          // –ú–∞–∫—Å–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤
```

## üö¶ –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

- **SIMULATION**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **LIVE**: –†–µ–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è (—Ç—Ä–µ–±—É–µ—Ç WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)

–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ `/trading-status`.

## üì± –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/portfolio` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–æ–¥–∫–∏:
- –û–±—â–∏–π –±–∞–ª–∞–Ω—Å –∏ PnL
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –í–∏–Ω—Ä–µ–π—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –°–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `npm run start:dev`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ—Ä–≥–æ–≤–ª—é: `POST /start-trading`
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ: `GET /portfolio`
4. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ: `node test-multi-strategy.js`
